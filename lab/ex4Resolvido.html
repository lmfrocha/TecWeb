<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta author="Faber Henrique Xavier">
    <title>Matching Game</title>
    <style>
        img{ position: absolute;}
        div{ position: absolute; weigth: 500px; height: 500px;}
        #rightSide{ left: 500px; border-left: 1px solid black;}
    </style>
</head>
<body onload="generateFaces()">
<h1>Jogo de Atenção</h1>
<p>Clique na face a mais no lado esquerdo</p>
<div id="leftSide"></div>
<div id="rightSide"></div>
<script>
    var numFaces = 5;
    var ladoEsquerdo = document.getElementById("leftSide");
    var ladoDireito = document.getElementsByTagName("div")[1];
    var docBody = document.getElementsByTagName("body")[0];

    function generateFaces(){
        clearFaces();
        // Loop para criar as imagens do lado esquerdo
        for(var i = 0; i < numFaces; i++){
            var imagem = document.createElement("img"); // Criando um elemento img
            imagem.src = "http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png"; // Carregando Imagem da web
            var top_pos = Math.floor(Math.random()*401); //Gerando posição aleatório superior
            var left_pos = Math.floor(Math.random()*401); //Gerando posição aleatória esquerda
            imagem.style.top = top_pos + "px"; // setando posição aleatória da nova imagem
            imagem.style.left = left_pos + "px"; // setando posição aleatória da nova imagem
            ladoEsquerdo.appendChild(imagem); // Adicionando nova imagem
        }
        // Criando lado direito
        var imagensLadoEsquerdo = ladoEsquerdo.cloneNode(true); // Clonando lado esquerdo
        imagensLadoEsquerdo.removeChild(imagensLadoEsquerdo.lastChild); // Removendo ultima imagem adicionada
        ladoDireito.appendChild(imagensLadoEsquerdo); // Adicionando imagens no lado direito

        // Criando eventListner no último elemento
        ladoEsquerdo.lastChild.onclick= function nextLevel(event){
            event.stopPropagation(); // Garantindo que o evento irá ocorrer apenas uma vez
            numFaces += 5; //Aumentando o número de faces em 5
            generateFaces(); // Gerando novas faces
        };

        // Criando um event Listner em todo o documento
        docBody.onclick = function gameOver() {
            alert("Game Over!"); // Mostrando Aviso
            docBody.onclick = null; // Removendo listner
            ladoEsquerdo.lastChild.onclick = null; // Garantindo que o usuário não roube no jogo 
            //Retirando listner da ultima imagem
        };
    }

    // Método para limpar tela.
    function clearFaces(){
        while(ladoEsquerdo.firstChild){ ladoEsquerdo.removeChild(ladoEsquerdo.firstChild); }
        while(ladoDireito.firstChild){ ladoDireito.removeChild(ladoDireito.firstChild); }
    }

</script>
</body>
</html>